# OSS Repository Cleanup - October 2, 2025

## Summary

Comprehensive repository audit identifying stale branches, outdated documentation, and areas needing clarification for better developer onboarding.

---

## 1. Branch Cleanup

### Stale Local Branches (Safe to Delete)

These branches appear to be merged or abandoned:

- [x] `#47-cache-metadata` - Merged, safe to delete
- [x] `#72-dynamic-headers-cookies` - Merged, safe to delete
- [x] `#74-dynamic-import-detect` - Merged, safe to delete
- [x] `#79-release-workflow-followups` - Merged, safe to delete
- [x] `#99-flight-tap-check` - Merged, safe to delete
- [x] `#129-svelte-style-demo` - Superseded by #133, safe to delete
- [x] `127-comprehensive-js-ext-fix` - Merged, safe to delete
- [x] `chore/hydration-hook-oss` - Merged, safe to delete
- [x] `chore/oss-version-lock` - Merged, safe to delete
- [x] `chore/version-script-unfreeze` - Merged, safe to delete
- [x] `fix-typescript-runtime-dep` - Merged in PR #148, safe to delete
- [x] `fix-vercel-config` - Merged in PR #146, safe to delete
- [x] `fix-vercel-workspace-deps` - Superseded, safe to delete
- [x] `fix/repo-config-tooling-2025-09-30` - Merged in T-1.9, safe to delete
- [x] `hotfix/changesets-token-and-releases` - Merged, safe to delete
- [x] `release/oss-0.2.2` - Old release, safe to delete
- [x] `update-docs` - Generic name, likely merged
- [x] `version-packages` - Changesets auto-branch, outdated

### Remote-Only Stale Branches (Consider Cleanup via GitHub)

- Multiple `demo-*` branches (merged into main)
- Old `dependabot/*` branches (merged)
- Old `changeset-*` branches (merged)
- Various feature branches with `#` prefixes (merged)

**Action**: Delete merged local branches, review remote branches for bulk deletion

---

## 2. Open PRs Review

### Documentation PRs (Should Merge)

- **PR #128** - "docs: add Vercel deployment guide for OSS demo"
  - Status: Ready to merge after review
  - Contains: Deployment documentation
  - Action: Review and merge

- **PR #112** - "docs: highlight serialization boundary validation in README"
  - Status: Ready to merge after review
  - Contains: Feature highlighting
  - Action: Review and merge

### Dependabot PRs (Review & Merge/Close)

- **PR #88** - Bump @types/node from 20.15.0 to 24.6.0
  - Action: Test compatibility, then merge or close with reason
- **PR #87** - Bump typescript-eslint from 8.44.0 to 8.45.0
  - Action: Merge (minor version, low risk)
- **PR #86** - Bump lint-staged from 16.1.6 to 16.2.3
  - Action: Merge (patch version, low risk)
- **PR #85** - Bump next from 14.2.5 to 15.5.4
  - Note: Already updated manually in demo, close this PR
  - Action: Close with comment

---

## 3. Documentation Structure Issues

### Missing Core Documentation

- [ ] **Root README.md** - Update with:
  - Clear demo link (demo.rsc-xray.dev)
  - Updated feature list (M4 features: Suspense analyzer, size warnings, cache() detector, route config)
  - Clear OSS vs Pro distinction
  - Updated CI badge (should be green)
  - Installation quickstart
- [ ] **CONTRIBUTING.md** - Missing, should include:
  - Development setup instructions
  - How to run tests
  - PR guidelines
  - Code style guide
  - Link to 02-Development-Guide.md

- [ ] **CHANGELOG.md** - Missing proper format
  - Should follow Keep a Changelog format
  - Currently relying on GitHub releases only

### Existing Docs Need Updates

#### docs/QUICKSTART.md

- [ ] Update with latest CLI commands
- [ ] Add demo link
- [ ] Include serialization boundary validation
- [ ] Reference M4 features

#### docs/VIOLATIONS.md

- [x] Updated 2025-10-01 with route-segment-config
- [ ] Add examples for each violation
- [ ] Link to interactive demo scenarios

#### docs/WORKFLOWS.md

- [ ] Review if still accurate
- [ ] Add CI/CD workflow diagrams
- [ ] Link to GitHub Actions

#### docs/GETTING-STARTED.md

- [ ] Merge with QUICKSTART.md or clarify difference
- [ ] Update installation steps
- [ ] Add troubleshooting section

### Potentially Obsolete Docs

- **docs/DEMO-FEATURE-AUDIT.md** - Session-specific, move to archive?
- **docs/PROPOSAL-CODEMIRROR-LSP-DEMOS.md** - Completed, move to archive?

---

## 4. Package README Quality

### Needs Improvement

#### packages/analyzer/README.md

- [ ] Add "What is it?" section at top
- [ ] Include quick installation
- [ ] Show basic usage example (≤60s to success)
- [ ] List all detection rules with brief descriptions
- [ ] Link back to root README
- [ ] Add badges (npm version, downloads)

#### packages/cli/README.md

- [ ] Add command reference table
- [ ] Include real examples from demo
- [ ] Add troubleshooting section
- [ ] Show typical workflow (analyze → report)
- [ ] Add badges

#### packages/lsp-server/README.md

- [ ] Clarify browser-side usage
- [ ] Add integration examples
- [ ] Link to demo implementation
- [ ] Add badges

#### packages/hydration/README.md

- [ ] Add React hooks usage examples
- [ ] Show Performance API integration
- [ ] Include timing interpretation guide
- [ ] Add badges

#### packages/report-html/README.md

- [ ] Add screenshot of report
- [ ] Show customization options
- [ ] Include embedding examples
- [ ] Add badges

#### packages/schemas/README.md

- [ ] Document Model JSON contract clearly
- [ ] Add TypeScript usage examples
- [ ] Show schema validation examples
- [ ] Add badges

### Examples Need Updates

#### examples/demo/README.md

- [ ] Update with latest features (Pro teasers, deep linking)
- [ ] Add deployment section (Vercel)
- [ ] Include local development setup
- [ ] Document scenario structure
- [ ] Add screenshot/GIF

#### examples/next-app/README.md

- [ ] Update setup instructions
- [ ] Document demo scenarios
- [ ] Add overlay usage guide
- [ ] Include analyzer workflow

---

## 5. Root Files Need Attention

### package.json

- [ ] Review scripts - are all used?
- [ ] Update repository URLs if needed
- [ ] Verify keywords are accurate
- [ ] Check license field

### tsconfig.base.json / tsconfig.json

- [ ] Verify compiler options are optimal
- [ ] Document any non-standard settings

### .gitignore

- [ ] Review for completeness
- [ ] Add common IDE files if missing

### .nvmrc / .node-version

- [ ] Verify Node.js version matches CI
- [ ] Document version requirement in README

---

## 6. CI/CD Configuration

### .github/workflows/ci-release.yml

- [ ] Verify all jobs are necessary
- [ ] Check if secrets are properly configured
- [ ] Ensure badge URL in README is correct

### .github/ISSUE_TEMPLATE/

- [ ] Review templates for completeness
- [ ] Add bug report template if missing
- [ ] Add feature request template if missing

### .github/PULL_REQUEST_TEMPLATE.md

- [ ] Verify checklist is helpful
- [ ] Add testing requirements
- [ ] Include documentation update reminder

---

## 7. Demo Application (examples/demo/)

### Documentation

- [ ] Add ARCHITECTURE.md explaining split-panel design
- [ ] Document scenario structure
- [ ] Include Pro teaser implementation notes

### Code Quality

- [ ] Review for unused components
- [ ] Check for TODO comments to address
- [ ] Verify all scenarios have tests

### Deployment

- [ ] Ensure vercel.json is optimal
- [ ] Document environment variables if any
- [ ] Add deployment troubleshooting guide

---

## 8. Inter-Package Consistency

### Version Alignment

- [ ] Verify all workspace dependencies use `workspace:*`
- [ ] Check published packages use correct version ranges
- [ ] Ensure @rsc-xray packages are properly scoped

### Import Consistency

- [ ] Check all packages use .js extensions for ESM
- [ ] Verify no circular dependencies
- [ ] Ensure consistent export patterns

### Testing Standards

- [ ] All packages have test script
- [ ] Coverage thresholds documented
- [ ] Test fixtures follow same pattern

---

## 9. Cross-References & Links

### Documentation Links

- [ ] Verify all relative links work
- [ ] Check external links (demo, npm, GitHub)
- [ ] Ensure doc cross-references are accurate

### Code Comments

- [ ] Review TODO/FIXME comments
- [ ] Remove outdated comments
- [ ] Add JSDoc where helpful

---

## 10. Developer Onboarding

### First-Time Setup

- [ ] Can a new developer clone and build successfully?
- [ ] Are dependencies clearly documented?
- [ ] Is the development workflow explained?

### Testing

- [ ] Can tests be run with one command?
- [ ] Are test requirements documented?
- [ ] Are fixtures easy to understand?

### Documentation

- [ ] Is there a clear entry point (GETTING-STARTED)?
- [ ] Are advanced features documented?
- [ ] Is Pro/OSS boundary clear?

---

## Implementation Plan

### Phase 1: Critical (Do First)

1. Delete merged branches
2. Review and merge/close open PRs (#128, #112, Dependabot PRs)
3. Update root README with M4 features and demo link
4. Add CONTRIBUTING.md

### Phase 2: High Priority

5. Update package READMEs with badges and quick examples
6. Consolidate/clarify QUICKSTART vs GETTING-STARTED
7. Add CHANGELOG.md
8. Review and update VIOLATIONS.md with examples

### Phase 3: Medium Priority

9. Improve example READMEs (demo, next-app)
10. Archive session-specific docs
11. Update CI/CD documentation
12. Add missing issue/PR templates

### Phase 4: Polish

13. Verify all links and cross-references
14. Review TODO/FIXME comments
15. Test new developer onboarding flow
16. Add screenshots/GIFs where helpful

---

## Success Criteria

- [ ] Zero stale branches in local repo
- [ ] All open PRs resolved (merged or closed with reason)
- [ ] Root README includes M4 features, demo link, clear quickstart
- [ ] All package READMEs follow consistent structure with badges
- [ ] CONTRIBUTING.md exists and is helpful
- [ ] Documentation links all work
- [ ] New developer can onboard with docs alone
- [ ] No obsolete session docs in main docs folder

---

## Notes

- Some decisions may require maintainer input (e.g., Node.js version policy)
- Breaking changes should be avoided unless necessary
- Focus on clarity and consistency over completeness
